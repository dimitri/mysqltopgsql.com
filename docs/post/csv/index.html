<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>MySQL to PostgreSQL  | How to output MySQL query results in CSV format?</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.31.1" />
    
    
      <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
    

    
    
      <link href="/dist/css/app.ab4b67a3ea25990fa8279f3b7ef08b61.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="http://mysqltopgsql.com/css/custom.css">
    

    
      
    

    

    <meta property="og:title" content="How to output MySQL query results in CSV format?" />
<meta property="og:description" content="PostgreSQL COPY and psql output formats." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://mysqltopgsql.com/post/csv/" />
















<meta itemprop="name" content="How to output MySQL query results in CSV format?">
<meta itemprop="description" content="PostgreSQL COPY and psql output formats.">



<meta itemprop="wordCount" content="259">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How to output MySQL query results in CSV format?"/>
<meta name="twitter:description" content="PostgreSQL COPY and psql output formats."/>

      
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-47059482-4', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

    
  </head>

  <body class="ma0 avenir bg-near-white production">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('http://mysqltopgsql.com/img/mackellar-american-printer-1882-pivotal-caster-1200rgb-2048x.jpg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://mysqltopgsql.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      MySQL to PostgreSQL
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="FAQ page">
              FAQ
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/project/" title="Project Methodology page">
              Project Methodology
            </a>
          </li>
          
        </ul>
      
      







  <a href="https://github.com/dimitri/pgloader" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">How to output MySQL query results in CSV format?</h1>
        
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
            PostgreSQL COPY and psql output formats.
          </h2>
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <h1 class="f1 athelas">
        How to output MySQL query results in CSV format?
      </h1>
      <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
        <blockquote>
<p>PostgreSQL implements the COPY protocol and command to output data
formatted in CSV. The <code>psql</code> command line client also knows how to produce
some other formats, such as XML, asciidoc, or latex.</p>
</blockquote>

<p>The simplest way to have your query result in CSV is the following:</p>

<pre><code>copy (
      select format('%s %s', drivers.forename, drivers.surname) as name,
             sum(points) as points
        from drivers
             join results using(driverid)
             join races using(raceid)
       where races.year = 2016
    group by drivers.driverid
    order by points desc
)
to stdout with csv header;
</code></pre>

<p>Which gives:</p>

<pre><code>name,points
Nico Rosberg,385
Lewis Hamilton,380
Daniel Ricciardo,256
Sebastian Vettel,212
Max Verstappen,204
Kimi Räikkönen,186
Sergio Pérez,101
Valtteri Bottas,85
Nico Hülkenberg,72
Fernando Alonso,54
Felipe Massa,53
Carlos Sainz,46
Romain Grosjean,29
Daniil Kvyat,25
Jenson Button,21
Kevin Magnussen,7
Felipe Nasr,2
Pascal Wehrlein,1
Jolyon Palmer,1
Stoffel Vandoorne,1
Esteban Gutiérrez,0
Marcus Ericsson,0
Esteban Ocon,0
Rio Haryanto,0
</code></pre>

<p>It is possible to change the delimiter of course:</p>

<pre><code>copy (
      select format('%s %s', drivers.forename, drivers.surname) as name,
             sum(points) as points
        from drivers
             join results using(driverid)
             join races using(raceid)
       where races.year = 2016
    group by drivers.driverid
    order by points desc
)
to stdout with csv header delimiter E'\t';
</code></pre>

<p>This time we have:</p>

<pre><code>name	points
Nico Rosberg	385
Lewis Hamilton	380
Daniel Ricciardo	256
Sebastian Vettel	212
Max Verstappen	204
Kimi Räikkönen	186
Sergio Pérez	101
Valtteri Bottas	85
Nico Hülkenberg	72
Fernando Alonso	54
Felipe Massa	53
Carlos Sainz	46
Romain Grosjean	29
Daniil Kvyat	25
Jenson Button	21
Kevin Magnussen	7
Felipe Nasr	2
Pascal Wehrlein	1
Jolyon Palmer	1
Stoffel Vandoorne	1
Esteban Gutiérrez	0
Marcus Ericsson	0
Esteban Ocon	0
Rio Haryanto	0
</code></pre>

      </section>
      <ul class="pa0">
  
</ul>

    </article>
    <div class="ph3 mt2 mt6-ns">
      





    </div>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://mysqltopgsql.com/" >
    &copy; 2018 MySQL to PostgreSQL
  </a>
  







  <a href="https://github.com/dimitri/pgloader" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
